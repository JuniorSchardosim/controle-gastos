<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Gastos Mensais</title>
    <link rel="stylesheet" href="style.css">
    
    <!-- Firebase -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, doc, setDoc, getDoc, onSnapshot } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyAiot3S4wOXuPSDOFsTv2UwizOKS9rxepY",
            authDomain: "controle-gastos-55f06.firebaseapp.com",
            projectId: "controle-gastos-55f06",
            storageBucket: "controle-gastos-55f06.firebasestorage.app",
            messagingSenderId: "20319528232",
            appId: "1:20319528232:web:056bb6e3a685e17abc1c1d"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        
        // Disponibilizar globalmente
        window.db = db;
        window.firestore = { collection, doc, setDoc, getDoc, onSnapshot };
    </script>
</head>
<body>
    <div class="tabs">
        <button class="tab-btn active" onclick="mudarAba('despesas')">ðŸ’° Despesas Mensais</button>
        <button class="tab-btn" onclick="mudarAba('vale')">ðŸ›’ Vale AlimentaÃ§Ã£o</button>
        <button class="tab-btn" onclick="mudarAba('futuras')">ðŸ“… Compras Futuras</button>
    </div>

    <div class="container">
        <div id="aba-despesas" class="aba-conteudo active">
            <h1>ðŸ’° Controle de Gastos Mensais</h1>
            
            <div class="mes-atual">
            <h2 id="mes-atual-nome">Carregando...</h2>
            <div style="display: flex; gap: 10px; justify-content: center; margin-top: 15px; flex-wrap: wrap;">
                <button class="btn-mes-nav" onclick="voltarMes()">â—€ MÃªs Anterior</button>
                <button class="btn-mes-nav" onclick="avancarMes()">MÃªs Seguinte â–¶</button>
                <button class="btn-mes-nav" onclick="irParaMesAtual()">ðŸ“… Ir para Hoje</button>
            </div>
            <button class="btn-fechar-mes" onclick="fecharMes()">Fechar MÃªs e Salvar no HistÃ³rico</button>
        </div>

        <div class="salario-section">
            <label for="salario">SalÃ¡rio do MÃªs:</label>
            <input type="number" id="salario" placeholder="R$ 0,00" step="0.01">
        </div>

        <div class="despesas-section">
            <h2>Adicionar Despesa</h2>
            <div class="despesa-form">
                <input type="text" id="nome-despesa" placeholder="Nome da despesa">
                <input type="number" id="valor-despesa" placeholder="R$ 0,00" step="0.01">
                <input type="number" id="meses-despesa" placeholder="Quantos meses?" min="1">
                <label class="checkbox-container">
                    <input type="checkbox" id="despesa-fixa">
                    <span>Despesa fixa</span>
                </label>
                <button class="btn-adicionar" onclick="adicionarDespesa()">Adicionar</button>
            </div>

            <div class="lista-despesas" id="lista-despesas">
                <p class="vazio">Nenhuma despesa adicionada</p>
            </div>
        </div>

        <div class="resumo">
            <div class="resumo-item">
                <span class="resumo-label">SalÃ¡rio:</span>
                <span class="resumo-valor" id="resumo-salario">R$ 0,00</span>
            </div>
            <div class="resumo-item">
                <span class="resumo-label">Total de Despesas:</span>
                <span class="resumo-valor" id="resumo-despesas">R$ 0,00</span>
            </div>
            <div class="resumo-item">
                <span class="resumo-label">Saldo:</span>
                <span class="resumo-valor" id="resumo-saldo">R$ 0,00</span>
            </div>
        </div>

        <div class="historico-section">
            <h2>ðŸ“Š HistÃ³rico de Meses Anteriores</h2>
            <div class="historico-lista" id="historico-lista">
                <p class="vazio">Nenhum mÃªs fechado ainda</p>
            </div>
        </div>
    </div>

    <!-- ABA VALE ALIMENTAÃ‡ÃƒO -->
    <div id="aba-vale" class="aba-conteudo">
        <h1>ðŸ›’ Controle de Vale AlimentaÃ§Ã£o</h1>

        <div class="mes-atual">
            <h2 id="vale-mes-atual">Carregando...</h2>
            <div style="display: flex; gap: 10px; justify-content: center; margin-top: 15px; flex-wrap: wrap;">
                <button class="btn-mes-nav" onclick="voltarMes()">â—€ MÃªs Anterior</button>
                <button class="btn-mes-nav" onclick="avancarMes()">MÃªs Seguinte â–¶</button>
                <button class="btn-mes-nav" onclick="irParaMesAtual()">ðŸ“… Ir para Hoje</button>
            </div>
            <button class="btn-fechar-mes" onclick="fecharMesVale()">Fechar MÃªs do Vale e Salvar no HistÃ³rico</button>
        </div>

        <div class="vale-saldo-section">
            <div class="vale-input-group">
                <label for="vale-recarga">Valor Recarregado:</label>
                <input type="number" id="vale-recarga" placeholder="R$ 0,00" step="0.01">
                <button class="btn-adicionar" onclick="adicionarRecarga()">Adicionar Recarga</button>
            </div>
        </div>

        <div class="despesas-section">
            <h2>Adicionar Compra no Supermercado</h2>
            <div class="despesa-form">
                <input type="text" id="nome-compra" placeholder="Nome do supermercado">
                <input type="number" id="valor-compra" placeholder="R$ 0,00" step="0.01">
                <input type="date" id="data-compra">
                <button class="btn-adicionar" onclick="adicionarCompra()">Adicionar</button>
            </div>

            <div class="lista-despesas" id="lista-compras">
                <p class="vazio">Nenhuma compra adicionada</p>
            </div>
        </div>

        <div class="resumo">
            <div class="resumo-item">
                <span class="resumo-label">Total Recarregado:</span>
                <span class="resumo-valor" id="vale-total-recarga">R$ 0,00</span>
            </div>
            <div class="resumo-item">
                <span class="resumo-label">Total Gasto:</span>
                <span class="resumo-valor" id="vale-total-gasto">R$ 0,00</span>
            </div>
            <div class="resumo-item">
                <span class="resumo-label">Saldo Vale:</span>
                <span class="resumo-valor" id="vale-saldo">R$ 0,00</span>
            </div>
        </div>

        <div class="historico-section">
            <h2>ðŸ“Š HistÃ³rico de Vale AlimentaÃ§Ã£o</h2>
            <div class="historico-lista" id="vale-historico-lista">
                <p class="vazio">Nenhum histÃ³rico ainda</p>
            </div>
        </div>
    </div>

    <!-- ABA COMPRAS FUTURAS -->
    <div id="aba-futuras" class="aba-conteudo">
        <h1>ðŸ“… Compras Futuras Planejadas</h1>

        <div class="mes-atual">
            <h2>Planeje suas prÃ³ximas compras</h2>
        </div>

        <div class="despesas-section">
            <h2>Adicionar Compra Futura</h2>
            <div class="despesa-form">
                <input type="text" id="nome-futura" placeholder="Nome do item/serviÃ§o">
                <input type="number" id="valor-futura" placeholder="R$ 0,00" step="0.01">
                <input type="date" id="data-futura">
                <select id="prioridade-futura">
                    <option value="baixa">Prioridade Baixa</option>
                    <option value="media">Prioridade MÃ©dia</option>
                    <option value="alta">Prioridade Alta</option>
                </select>
                <button class="btn-adicionar" onclick="adicionarCompraFutura()">Adicionar</button>
            </div>

            <div class="lista-despesas" id="lista-futuras">
                <p class="vazio">Nenhuma compra futura planejada</p>
            </div>
        </div>

        <div class="resumo">
            <div class="resumo-item">
                <span class="resumo-label">Total Planejado:</span>
                <span class="resumo-valor" id="total-futuras">R$ 0,00</span>
            </div>
        </div>
    </div>
</div>

    <script src="script.js"></script>
</body>
</html>
